{% extends "layout.html" %}

{% block content %}
<doctype html>
<title>Search Substrates</title>
<head>
    <script src="http://ebi-uniprot.github.io/CDN/protvista/protvista.js"></script>
    <script type=”text/javascript” src=”http://www.ncbi.nlm.nih.gov/projects/sviewer/js/sviewer.js”></script>

    <link href="http://ebi-uniprot.github.io/CDN/protvista/main.css" rel="stylesheet"/>
    <link rel="stylesheet" type="text/css" href="/static/tabs.css">
</head>

{% if results %}
  {% for x in results %}
  <div class="w3-card-4 w3-margin w3-white">
      <div class="w3-container">
        <br>

        <center> <h3><b>Substrate</b></h3> <center>
        <span class="w3-teal"><td>{{ x.Sub_Gene.upper() }}</td></span>
      </div>
  <!-- Define Tabs -->
  <div class="tabset">
    <!-- Tab 1 -->
    <input type="radio" name="tabset" id="tab1" aria-controls="info" checked>
    <label for="tab1">General Information</label>
    <!-- Tab 2 -->
    <input type="radio" name="tabset" id="tab2" aria-controls="annot">
    <label for="tab2">{{ x.Substrate_Symbol.upper() }} Features</label>
    <!--&lt;!&ndash; Tab 3 &ndash;&gt;-->
    <!--<input type="radio" name="tabset" id="tab3" aria-controls="Genome">-->
    <!--<label for="tab3">Genome Browser</label>-->
  
  <!-- Define Tab Panels -->
    <div class="tab-panels">
      <!-- General Information  tab panels -->
      <section id="info" class="tab-panel">
          <h4 class="w3-border-bottom w3-border-light-red w3-padding-12 w3-light-cyan"> General Information </h4>


          <br>
          <h5> Substrate: <span class="w3-opacity">{{ x.Sub_Gene.upper() }}</span></h5>
          <h5> Gene: <span class="w3-opacity">{{ x.Substrate_Symbol.upper() }}</span></h5>
          <h5> Phosphorylator : <span class="w3-opacity">{{ x.Kinase.upper() }}</span></h5>
          <h5> Substrate Accession Number: <span class="w3-opacity">{{ x.Sub_ACC_ID }}</span></h5>
          <h5> Modified Residue: <span class="w3-opacity">{{ x.Sub_Mod_Rsd }}</span></h5>
          <h5> Amino Acid Site of Phosphorylation: <span class="w3-opacity">{{ x.Site_AA }}</span></h5>
          <h5> Substrate Domain: <span class="w3-opacity">{{ x.Sub_Domain }}</span></h5>
          <h5> Chromosome Number: <span class="w3-opacity">{{ x.Chromosome }}</span></h5> 
          <h5> Chrosome Region: <span class="w3-opacity">{{ x.Leg }}</span></h5>

          <div id="gviewer1" class="SeqViewerApp" data-autoload>
            <a href="?embedded=true&id=NC_000012.12&tracks=[key:sequence_track,name:Sequence,display_name:Sequence,id:STD649220238,annots:Sequence,ShowLabel:false,ColorGaps:false,shown:true,order:1][key:gene_model_track,name:Genes,display_name:Genes,id:STD3194982005,annots:Unnamed,Options:ShowAll,CDSProductFeats:false,NtRuler:true,AaRuler:true,HighlightMode:2,ShowLabel:true,shown:true,order:784][key:alignment_track,name:Alignments---NG Alignments,display_name:NG Alignments,id:STD4206364812,annots:NG Alignments,Layout:Adaptive,StatDisplay:15,Color:Show Differences,UnalignedTailsMode:glyph,sort_by:,LinkMatePairAligns:true,ShowAlnStat:false,AlignedSeqFeats:false,Label:true,IdenticalBases:false,shown:true,order:785]&assm_context=GCF_000001405.35&mk=9095637|Ribosomal%20slippage|008000&v=9095582:9095714&c=666699&select=null&slim=0&appname=kinase_kin"></a>
                </div>

      </section>

      <!-- Substrate Features -->
      <section id="annot" class="tab-panel">
        <h4 class="w3-border-bottom w3-border-blue-gray w3-padding-12 w3-light-teal">{{ x.Substrate_Symbol.upper() }} Features </h4>
        <!-- Provista Script-->
        <div id="my_graph" style="width:1024px; margin:auto;"></div>
            <center><script>
              window.onload = function () {
                  var my_graph = document.getElementById('my_graph');
                  var ProtVista = require('ProtVista');
                  var instance = new ProtVista({
                      el: my_graph,
                      uniprotacc: '{{ x.Sub_ACC_ID }}'

                      //These categories will **not** be rendered.
                      exclusions: ['SEQUENCE_INFORMATION', 'STRUCTURAL', 'TOPOLOGY', 'MUTAGENESIS', 'MOLECULE_PROCESSING']
                  });
              }
        </script></center>
      </section>

        <!-- Genome Browser -->
        <section id="Genome" class="tab-panel">



    </div>
  </div>
  {% else %}
  <br>
    <center> No Results - Please try again! </center>
    {% endfor %}
  {% endif %}

  <div class="w3-row"></div>

{% endblock %}